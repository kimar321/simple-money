"use strict";(self["webpackChunkproject_money"]=self["webpackChunkproject_money"]||[]).push([[926],{5926:function(e,s,l){l.r(s),l.d(s,{default:function(){return h}});l(2062);var t=l(3396),a=l(4870),o=l(2483),n=l(65),d=l(1440),i=l(8116),u=l(1274);const c={class:"lesson"},p={key:1},r={key:0},m={key:1,class:"create-lesson"},v={class:"header"},g={key:0,style:{color:"#00c48c"}};var y=(0,t.aZ)({__name:"EditLesson",props:{lessonItem:{type:Object,default:()=>({id:Date.now(),title:"",description:"",type:"module"})},route:{type:String},edit:{type:Boolean,default:!1}},setup(e){const s=(0,n.oR)(),l=(0,o.yj)(),y=((0,o.yj)(),(0,t.Fl)({get:()=>s.state.lesson.showLesson,set:e=>s.state.lesson.showLesson=e})),f=(0,t.Fl)({get:()=>s.state.lesson.tmpLesson,set:e=>s.state.lesson.tmpLesson=e}),h=(0,t.Fl)({get:()=>s.state.lesson.lessonPage,set:e=>s.state.lesson.lessonPage=e}),k=(0,a.iH)(null);(0,t.YP)((()=>l.params.id),((e,t)=>{e!==t&&(console.log(l.params.id),s.dispatch("lesson/selectLesson",{id:l.params.id}))}),{immediate:!0,deep:!0});const w=()=>{s.dispatch("lesson/updateLesson",{item:f.value}),k.value.onEdit()},L=()=>{k.value.onEdit()},b=()=>{-1===h.value.id?(h.value.lesson_id=f.value.id,s.dispatch("lesson/createLessonPage",{item:h.value})):s.dispatch("lesson/updateLessonPage",{item:h.value})},_=e=>{const s=e.target,l=s.files?.[0];if(l){const e=new FileReader;e.onload=e=>{h.value.page=e.target?.result},e.readAsText(l)}},j=()=>{const e=`Module ${f.value.module_id} Lesson ${f.value.title}.txt`,s=new Blob([h.value.page],{type:"text/plain"}),l=document.createElement("a");l.href=URL.createObjectURL(s),l.download=e,document.body.appendChild(l),l.click(),document.body.removeChild(l)};return(e,l)=>((0,t.wg)(),(0,t.iD)("main",null,[(0,t._)("div",c,[y.value?((0,t.wg)(),(0,t.j4)(i.Z,{modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=e=>f.value=e),type:"module",edit:!0,onSave:w,onEdit:L,ref_key:"cardRef",ref:k,key:f.value.id},null,8,["modelValue"])):((0,t.wg)(),(0,t.iD)("h3",p,"Загрузка..."))]),(0,a.SU)(s).state.lesson.loadLessonPage?((0,t.wg)(),(0,t.iD)("h3",r,"Загрузка...")):((0,t.wg)(),(0,t.iD)("div",m,[(0,t._)("header",v,[(0,t.Wm)(d.Z,{color:"success",label:"Сохранить",onClick:b,disabled:(0,a.SU)(s).state.lesson.saveLessonPage},null,8,["disabled"]),(0,t._)("label",{for:"fileInput",class:"custom-file-upload"},[(0,t.Uk)(" Загрузить файл "),(0,t._)("input",{type:"file",id:"fileInput",onClick:_})]),(0,t.Wm)(d.Z,{color:"success",label:"Скачать",onClick:j})]),(0,a.SU)(s).state.lesson.saveLessonPage?((0,t.wg)(),(0,t.iD)("h3",g,"Сохранение.....")):(0,t.kq)("",!0),((0,t.wg)(),(0,t.j4)(u.Z,{modelValue:h.value.page,"onUpdate:modelValue":l[1]||(l[1]=e=>h.value.page=e),key:h.value.id},null,8,["modelValue"]))]))]))}});const f=y;var h=f}}]);
//# sourceMappingURL=926.26a263ff.js.map